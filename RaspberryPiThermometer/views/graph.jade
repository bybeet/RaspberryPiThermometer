extends layout

block content
    h1 Temperature Graph
    h2= date
    div(style="width:100%")
        canvas(id="lineChart")
    div(style="width:100%")
        canvas(id="pieChart")
    script(type='text/javascript').
        var pieData = [
            {
                value: Math.round((!{indoorHigher}/[!{outTemp}].length)*100),
                color:"#F7464A",
                highlight: "#FF5A5E",
                label: "Indoor Temperature Higher (%)"
            },
            {
                value: Math.round(([!{outTemp}].length - !{indoorHigher})/[!{outTemp}].length*100),
                color: "#46BFBD",
                highlight: "#5AD3D1",
                label: "Outdoor Temperature Higher (%)"
            }
        ];
        var data = {
            labels: !{timestamps},
            datasets: [
            {
                title: "Outside Temperature",
                fillColor: "rgba(220,220,220,0.2)",
                strokeColor: "rgba(220,220,220,1)",
                pointColor: "rgba(220,220,220,1)",
                pointStrokeColor: "#fff",
                pointHighlightFill: "#fff",
                pointHighlightStroke: "rgba(220,220,220,1)",
                data: [!{outTemp}]
             },
             {
                title: "Inside Temperature",
                fillColor: "rgba(151,187,205,0.2)",
                strokeColor: "rgba(151,187,205,1)",
                pointColor: "rgba(151,187,205,1)",
                pointStrokeColor: "#fff",
                pointHighlightFill: "#fff",
                pointHighlightStroke: "rgba(151,187,205,1)",
                data: [!{inTemp}]
             }
             ]
        };
        window.onload = function(){
            var ctx = document.getElementById("lineChart").getContext("2d");
            window.myLine = new Chart(ctx).Line(data, {
                responsive: true,
                scaleShowLabels: true,
                bezierCurve: true,
                pointDot: false
                });
            var pieCtx = document.getElementById("pieChart").getContext("2d");
            window.myPie = new Chart(pieCtx).Doughnut(pieData, {
                responsive: true,
                animateScale: true
            });
        }

